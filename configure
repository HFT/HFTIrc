#!/bin/sh
# Shitty script to generate custom .mk
# WHY?
#  Send all your love to GNUMake with is not capable to be REAL MAKE COMPATIBLE
# .

UNAME="`uname`"
NCURSES="w5"

echo "Configure script is now configuring your config.local.mk"
echo "Checking OS... ${UNAME}"

rm -f "config.local.mk"
touch "config.local.mk"

if [ "${UNAME}" = "Linux" ]; then
    echo "CFLAGS += -D_GNU_SOURCE" >> "config.local.mk"
fi

if [ "${UNAME}" = "NetBSD" ]; then
    NCURSES="5"
fi

printf "Checking for ncursesw5... "

if [ "${NCURSES}" = "w5" ]; then
    NC_LIBS="`ncursesw5-config --libs`"
    NC_INCS="`ncursesw5-config --cflags`"
fi

if [ "${NCURSES}" = "5" ]; then
    NC_LIBS="`ncurses5-config --libs`"
    NC_INCS="`ncurses5-config --cflags`"
fi

echo "NCURSES5INCDIR= ${NC_INCS}" >> "config.local.mk"
echo "NCURSES5LIBDIR= ${NC_LIBS}" >> "config.local.mk"

echo "done"

echo "Checking beer in fridge... nop :("
echo "Done."
